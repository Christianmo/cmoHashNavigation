!function(root,factory){"function"==typeof define&&define.amd?define([],factory):"object"==typeof module&&module.exports?module.exports=factory():root.cmoHashNavigation=factory()}(this,function(){"use strict";var easingFunctions={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function scrollToPos(nextPos,options){var currentPos=window.pageYOffset,startTime=window.performance.now();window.requestAnimationFrame(function scrollAnimation(currentTime){var interval=Math.abs(currentTime-startTime);if(interval<=options.time){var easingFunction=easingFunctions[options.easing](interval/options.time),newPos=Math.ceil(currentPos+easingFunction*(nextPos-currentPos));window.scrollTo(0,newPos),window.requestAnimationFrame(scrollAnimation)}else window.scrollTo(0,nextPos)})}return function(options){var nav=document.querySelector(options.selector),links=nav.querySelectorAll(options.childSelector),linksPosArr=[],isSelector="select"===options.type;[].forEach.call(links,function(link){var sectionSelector=link.dataset.hash,sectionEl=document.querySelector(sectionSelector),linkEl=link,topPos=sectionEl.offsetTop,bottomPos=topPos+sectionEl.offsetHeight;linksPosArr.push({linkEl:linkEl,sectionEl:sectionEl,topPos:topPos,bottomPos:bottomPos}),isSelector||link.addEventListener("click",function(){scrollToPos(sectionEl.offsetTop,options)})}),isSelector&&nav.addEventListener("change",function(){var sectionSelector=nav.options[nav.selectedIndex].dataset.hash;scrollToPos(document.querySelector(sectionSelector).offsetTop,options)}),function(linksPosArr){window.addEventListener("scroll",function(){var currentPos=window.pageYOffset;linksPosArr.forEach(function(linkObj){linkObj.linkEl.classList.remove("active"),currentPos>=linkObj.topPos&&currentPos<linkObj.bottomPos&&linkObj.linkEl.classList.add("active")})})}(linksPosArr)}});